pre-commit:
  commands:
    prettier:
      glob: "*.{js,jsx,ts,tsx,json,css,md}"
      run: |
        FILES=$(echo {staged_files} | xargs -n1 | grep '^savepoint-app/' | sed 's@^savepoint-app/@@' | tr '\n' ' ')
        if [ -n "$FILES" ]; then
          cd savepoint-app && pnpm exec prettier --write --cache $FILES
        fi
      stage_fixed: true
    eslint:
      glob: "*.{js,jsx,ts,tsx}"
      run: |
        FILES=$(echo {staged_files} | xargs -n1 | grep '^savepoint-app/' | sed 's@^savepoint-app/@@' | tr '\n' ' ')
        if [ -n "$FILES" ]; then
          cd savepoint-app && pnpm exec eslint --fix $FILES
        fi
      stage_fixed: true
    typecheck:
      run: cd savepoint-app && pnpm typecheck

commit-msg:
  commands:
    commitlint:
      run: pnpm exec commitlint --edit {1}
